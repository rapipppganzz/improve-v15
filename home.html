<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8" />
  <title>RapipppModss App</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = { darkMode: 'media' }
  </script>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      overflow: hidden;
    }
    canvas {
      position: fixed;
      top: 0;
      left: 0;
      z-index: 0;
    }
  </style>
</head>
<body class="bg-black text-white">

  <!-- Background Matrix -->
  <canvas id="matrix"></canvas>

  <!-- Audio Musik -->
  <audio id="bgMusic" autoplay muted loop>
    <source src="https://files.catbox.moe/sq8pw5.mp3" type="audio/mpeg">
    Browser kamu tidak mendukung audio.
  </audio>

  <!-- Konten -->
  <div class="fixed inset-0 flex items-center justify-center z-10 p-4" style="min-height: calc(var(--vh, 1vh) * 100);">
    <div class="relative bg-white dark:bg-[#1e253a] text-black dark:text-white rounded-xl p-6 sm:p-10 w-full max-w-md sm:max-w-xl shadow-2xl">

      <!-- Logout -->
      <button onclick="logout()" class="absolute top-4 right-4 text-sm bg-red-500 hover:bg-red-600 px-3 py-1 rounded">Logout</button>

      <h1 class="text-xl font-bold text-cyan-600 dark:text-cyan-400 text-center mb-4">IMPROVE V15 PRO</h1>

      <img src="https://files.catbox.moe/97vosy.jpg" alt="Thumbnail"
           class="mx-auto mb-4 w-24 h-24 rounded-full border border-[#2a2f44] object-cover" />

      <div class="bg-yellow-100 dark:bg-[#111827] border-2 border-yellow-400 text-center py-2 px-4 rounded-md mb-4 font-semibold text-sm">
        üöÄ IMPROVE V15 BY RAPIPPPMODSS üöÄ
      </div>

      <input id="waNumber"
             class="w-full mb-4 px-3 py-2 rounded bg-gray-100 dark:bg-[#2a2f44] text-black dark:text-[#a0a0a0] placeholder-gray-500 dark:placeholder-[#a0a0a0] border border-gray-300 dark:border-[#2a2f44] focus:outline-none focus:ring-2 focus:ring-cyan-500"
             placeholder="Masukkan nomor WA (628xxxx)" type="text" />

      <div class="grid grid-cols-3 gap-2 mb-4">
        <button onclick="sendAction('android')" class="bg-blue-600 hover:bg-blue-700 py-2 rounded text-xs text-white">Crash<br>Android</button>
        <button onclick="sendAction('ios')" class="bg-blue-600 hover:bg-blue-700 py-2 rounded text-xs text-white">Crash<br>iPhone</button>
        <button onclick="sendAction('delay')" class="bg-blue-600 hover:bg-blue-700 py-2 rounded text-xs text-white">Delay<br>Mention</button>
      </div>

      <p class="text-sm mb-1">
        <span class="font-bold">Status:</span> <span id="serverStatus">Mengecek...</span>
      </p>

      <p class="text-sm mb-4">
        <span class="font-bold">Info:</span> Selamat datang, <span id="username">Pengguna</span>
      </p>

      <div class="flex justify-between items-center text-xs text-gray-600 dark:text-gray-400 pt-2 border-t border-gray-300 dark:border-[#2c344b] mt-2">
        <span>¬© RapipppModss</span>
        <a href="#" id="supportLink" class="text-cyan-600 dark:text-cyan-400 hover:underline">Hubungi kami</a>
      </div>
    </div>
  </div>

  <!-- Modal Support -->
  <div id="supportModal" class="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 hidden">
    <div class="bg-white dark:bg-[#1e253a] text-black dark:text-white rounded-xl p-6 w-full max-w-sm relative">
      <button onclick="closeModal()" class="absolute top-2 right-3 text-sm bg-red-500 hover:bg-red-600 px-2 py-1 rounded">‚úï</button>
      <h2 class="text-lg font-bold text-cyan-600 dark:text-cyan-400 mb-2">Butuh Bantuan?</h2>
      <p class="text-sm mb-3">Hubungi admin di:</p>
      <ul class="text-sm list-disc list-inside text-gray-700 dark:text-gray-300">
        <li>WhatsApp: <a href="https://wa.me/6283159391279" target="_blank" class="text-cyan-600 dark:text-cyan-400 hover:underline">6283159391279</a></li>
        <li>Email: <a href="mailto:support@rapipppmodss.com" class="text-cyan-600 dark:text-cyan-400 hover:underline">support@rapipppmodss.com</a></li>
      </ul>
    </div>
  </div>

  <!-- Script -->
  <script>
    // Fix tinggi viewport HP
    function setFullHeight() {
      document.documentElement.style.setProperty('--vh', `${window.innerHeight * 0.01}px`);
    }
    window.addEventListener('resize', setFullHeight);
    window.addEventListener('load', setFullHeight);

    // Autoplay musik setelah interaksi
    const music = document.getElementById("bgMusic");
    function enableAudio() {
      music.muted = false;
      music.play();
      document.removeEventListener("click", enableAudio);
      document.removeEventListener("scroll", enableAudio);
    }
    document.addEventListener("click", enableAudio);
    document.addEventListener("scroll", enableAudio);

    // Username
    const username = localStorage.getItem("username");
    if (!username) window.location.href = "index.html";
    else document.getElementById("username").textContent = username;

    function logout() {
      localStorage.removeItem("username");
      window.location.href = "index.html";
    }

    document.getElementById("serverStatus").textContent = "Server Tidak Aktif ‚ùå";

    function sendAction(action) {
      const number = document.getElementById("waNumber").value.trim();
      if (!/^62\d{8,15}$/.test(number)) {
        alert("‚ö†Ô∏è Nomor tidak valid. Gunakan format 62xxxxxxxxxx");
        return;
      }

      let url = {
        delay: "https://example.com/api/delay",
        android: "https://example.com/api/crash/android",
        ios: "https://example.com/api/crash/ios"
      }[action];

      fetch(url, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ number: number })
      })
      .then(res => res.json())
      .then(data => alert("‚úÖ Berhasil: " + (data.message || "Terkirim!")))
      .catch(err => {
        console.error(err);
        alert("‚ùå Gagal mengirim ke server.");
      });
    }

    // Modal Support
    function closeModal() {
      document.getElementById("supportModal").classList.add("hidden");
    }
    document.getElementById("supportLink").addEventListener("click", function(e) {
      e.preventDefault();
      document.getElementById("supportModal").classList.remove("hidden");
    });

    // Matrix hacker background
    const canvas = document.getElementById("matrix");
    const ctx = canvas.getContext("2d");
    canvas.height = window.innerHeight;
    canvas.width = window.innerWidth;

    let letters = "01".split("");
    let fontSize = 12;
    let columns = canvas.width / fontSize;
    let drops = Array.from({ length: columns }).fill(1);

    function drawMatrix() {
      ctx.fillStyle = "rgba(0, 0, 0, 0.05)";
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      ctx.fillStyle = "#00ff00";
      ctx.font = fontSize + "px monospace";
      for (let i = 0; i < drops.length; i++) {
        const text = letters[Math.floor(Math.random() * letters.length)];
        ctx.fillText(text, i * fontSize, drops[i] * fontSize);
        if (drops[i] * fontSize > canvas.height || Math.random() > 0.95) {
          drops[i] = 0;
        }
        drops[i]++;
      }
    }
    setInterval(drawMatrix, 50);
  </script>
</body>
</html>
